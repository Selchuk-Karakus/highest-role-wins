<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Highest Role Wins</title>
</head>

<body>
    <h1>Welcome to Browser side JavaScript!!!</h1>
    <label>Player Name: <span id="userName"></span></label>
    <input name="user" type="text" value="Selchuk">
    <button id="btnJoin">Join</button>
    <button id="btnRoll" style="display: none">Roll</button>
    <div class="userList"></div>
    <script src="socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const user = document.querySelector(`input[name="user"]`);
        const btnJoinEl = document.querySelector("#btnJoin");
        const btnRollEl = document.querySelector("#btnRoll");
        const userList = document.querySelector(".userList");

        btnJoinEl.addEventListener("click", (event) => {
            event.preventDefault();

            let id = `player_${Math.floor(Date.now() * Math.random())}`;
            console.log(id)
            socket.emit("new player", id, user.value);
            user.style.display = "none";
            btnJoinEl.style.display = "none";
            btnRollEl.style.display = "inline-block"
            userName.textContent = user.value;
            const listPlayers = (players) => {
                console.log(players);
            }
            socket.on("players", listPlayers);
        })

        btnRollEl.addEventListener("click", () => {
            socket.emit("roll");
            btnRollEl.disabled = true;
        })
    </script>
</body>

</html>